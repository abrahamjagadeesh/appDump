function indexStationShortCode(t){var e=0;return arrayStationNames.forEach(function(r,o){return r.value===t?(e=o,void 0):void 0}),e}function whenNextTrain(t){var e,r=calcCurrentTime(),t=t,o=[],n=0,a=60*r.hour+r.minutes;e=t[0]<r.hour?60*(t[0]+24)+t[1]:60*t[0]+t[1];var i=e-a;if(i>59){var l=Math.floor(i/60),u=n+l;o[1]=i%60,o[0]=u>=24?u-24:u}else o[1]=i,o[0]=n;this.getNextTime=o,this.getInText=function(){var t=1===o[0]?" hour ":" hours ";return 0===o[1]?"Now":0!==o[0]?"in "+o[0]+t+o[1]+" Minutes":"in "+o[1]+" Minutes"}()}function startingTimeOfTrainsFromThisStation(t,e){var r=parseInt(t[1]),o=parseInt(t[0]),n=r+e,a=[];if(n>59){var i=Math.floor(n/60),l=o+i;a[1]=n%60,a[0]=l>=24?l-24:l}else a[1]=r+e,a[0]=o;return a}function calcCurrentTime(){var t={},e=new Date;return t.hour=e.getHours(),t.minutes=e.getMinutes(),t.day=e.getDay(),t}function trainsStopInThisStation(t,e,r,o){var n,a=calcCurrentTime(),l=[],u=!1;n="true"===r&&6===a.day||"false"===r&&0===a.day||o&&6===a.day?!0:!1;var s=data.filter(function(t){return n?"Su"==t.runday[0]||"Daily"==t.runday[0]:"M"==t.runday[0]||"Daily"==t.runday[0]});for(i=0;i<s.length;i++){var g=s[i],m=g.stations,c=g.timeDifferenceFromSource,h=g.actualtimeDifferenceFromSource,p=0,S=g.distance,f=0,T=g.startingTime,I=g.train,d=m.indexOf(t),M=m.indexOf(e);if(M>d&&d>=0&&M>=0){u=!0,timeTakentoReachHere=c[d];for(var v=d+1;M>=v;v++)p+=h[v];f=parseInt(S[M])-parseInt(S[d]);for(var y=0,x=T.length;x--;){var N=startingTimeOfTrainsFromThisStation(T[y],timeTakentoReachHere),w=[],D=N[0],A=N[1];w[0]=10>D?"0"+D:""+D,w[1]=10>A?"0"+A:""+A;var C={},P=0;"true"===r||o?(P=60*D+A,C.trainName=I,C.hoursMinutes=N,C.hoursMinutesZeroPadded=w,C.hoursPlusMins=P,C.totalJourneyTime=p+" Minutes",C.totalJourneyKM=f+"KM",C.fulltrainname=g.fulltrainname,C.thisStartingTIme=T[y],C.whenNextTrain=new whenNextTrain(N).getInText,l.push(C)):(D==a.hour&&A>=a.minutes||D>a.hour)&&(P=60*D+A,C.trainName=I,C.hoursMinutes=N,C.hoursMinutesZeroPadded=w,C.hoursPlusMins=P,C.totalJourneyTime=p+" Minutes",C.totalJourneyKM=f+"KM",C.fulltrainname=g.fulltrainname,C.thisStartingTIme=T[y],C.whenNextTrain=new whenNextTrain(N).getInText,l.push(C)),N=[],y++}}}l.sort(function(t,e){return t.hoursPlusMins-e.hoursPlusMins});for(var F=[],J=0;5>J;J++)void 0!==l[J]&&F.push(l[J]);return{isvalid:u,nextTrains:l,currentTrainArray:l[0],nextFiveTrainsArray:F}}var Storage=Storage||{};Storage.portion1=null===localStorage.getItem("portion1")?(localStorage.setItem("portion1",["MAS","AVD"]),localStorage.getItem("portion1").split(",")):localStorage.getItem("portion1").split(","),Storage.portion2=null===localStorage.getItem("portion2")?(localStorage.setItem("portion2",["AVD","MAS"]),localStorage.getItem("portion2").split(",")):localStorage.getItem("portion2").split(","),Storage.portion3=null===localStorage.getItem("portion3")?(localStorage.setItem("portion3",["TYMR","VLCY"]),localStorage.getItem("portion3").split(",")):localStorage.getItem("portion3").split(","),Storage.portion4=null===localStorage.getItem("portion4")?(localStorage.setItem("portion4",["VLCY","TYMR"]),localStorage.getItem("portion4").split(",")):localStorage.getItem("portion4").split(",");